<body class="bg-cover bg-no-repeat bg-bottom background-image flex flex-col items-center scale-50">

  <!-- TODO: move control to hbs partials, move script to separate script file. -->

    <div class="container mx-auto px-4" style="display: block;">
        <div class="w-full text-white flex flex-col pt-12">

      <div class="flex flex-col justify-center items-center">
        <h1 class="text-xl md:mb-5 text-center">Forecast for {{data.currentDate}}</h1>
        <h1 id="regionDisplay" class="text-xl md:mb-5 text-center">Your region is:</h1>
        <!-- <p class="w-3/5 md:w-1/2 text-center">{{data.forecastResult}}</p>-->
        <p class="w-4/5 md:w-1/2 text-center">To reduce carbon emissions, we recommend using electricity during green
          time frames and to avoid using electricity during the red time frames</p>
      </div>
      <!-- Add message container above chart -->
      <div id="chartMessage" class="text-white text-center text-lg mb-4"></div>
      <div class="md:mt-5 max-w-screen-lg w-full mx-auto md:px-6">
        <canvas id="forecastChart"></canvas>
      </div>
      <p class="md:text-xl text-center mt-5 md:mt-10 md:mb-8">
        Carbon Intensity data provided by
        <a href="https://www.electricitymaps.com/" target="_blank" class="text-blue-500 underline">
          electricitymaps.com
        </a>
      </p>

      {{!-- <div id="subscribeControls" class="text-center mt-8 h-2/5 mb-10">
        <p class="m-3">You can leave your Email or WhatsApp below to subscribe
          to our daily recommendations</p>
        <form method="POST" action="" id="emailSubscriptionForm"
          class="px-5 flex flex-col md:flex-row md:justify-center">
          <div id="emailField">
            <input name="email" id="emailInput"
              class="mx-3 bg-transparent border-2 border-white text-white font-bold rounded-lg text-lg px-6 py-3 hover:bg-white hover:text-gray-800 transition-colors duration-300"
              placeholder="Enter your email" />
          </div>
          <input name="region" type="text" class="hidden" id="regionInput" value="{{data.region}}" />
          <div>
            <button type="submit"
              class="bg-black text-white font-bold rounded-lg text-lg px-6 py-3 hover:bg-gray-800 transition-colors duration-300 mt-5 md:mt-0">Submit</button>
          </div>
        </form>
        <form method="POST" action="" id="whatsAppSubscriptionForm"
          class="px-5 flex flex-col md:flex-row md:justify-center">
          <div id="phoneField">
            <input name="phone" id="phoneInput"
              class="mx-3 bg-transparent border-2 border-white text-white font-bold rounded-lg text-lg px-6 py-3 hover:bg-white hover:text-gray-800 transition-colors duration-300"
              placeholder="+49 ..." />
          </div>
          <input name="region" type="text" class="hidden" id="regionInput" value="{{data.region}}" />
          <div>
            <button type="submit"
              class="bg-black text-white font-bold rounded-lg text-lg px-6 py-3 hover:bg-gray-800 transition-colors duration-300 mt-5 md:mt-0">Submit</button>
          </div>
        </form>
      </div> --}}
    </div>
  </div>

  {{!--
  <script src="/js/subscription.js"></script> --}}
  <script type="module">

    import { initializeChart } from "/js/chart_world.js"


    initializeChart()

    // Accessing HBS data
  </script>

  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const country = urlParams.get('country');

    if (country) {
      const regionElement = document.getElementById('regionDisplay');
      regionElement.textContent += ` ${country}`;
    }
  </script>

</body>